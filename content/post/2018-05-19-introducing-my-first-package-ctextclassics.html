---
title: Ctextclassics, my First Package
author: Jeremy Johnson
date: '2018-05-17'
slug: Ctextclassics, my First Package
categories: [API, text analysis]
tags: [ctextclassics, API, httr, text analysis, Chinese]
---



<p>My latest update is a milestone! I have authored my first ever R package which is an API caller for ctext.org. Ctext hosts numerous pre-modern Chinese texts and my package makes them available to you. The scope is broad, but think philosophical works in Confucianism, Daoism, Legalism, military doctrines, history compilations, works in medicine, and many more.</p>
<p>The three main functions of ctextclassics are <code>get_chapter(&quot;book&quot;, &quot;chapter&quot;)</code> ,<code>get_chapters(&quot;book&quot;, chapters)</code>, <code>get_books(&quot;book&quot;)</code> and the internal dataframe <code>book_list</code> which shows the available texts. So perhaps try something like: <br></p>
<pre class="r"><code>library(ctextclassics)
head(unique(book_list$book), n = 5)</code></pre>
<pre><code>## [1] &quot;analects&quot;        &quot;art-of-war&quot;      &quot;bai-hu-tong&quot;     &quot;baopuzi&quot;        
## [5] &quot;book-of-changes&quot;</code></pre>
<pre class="r"><code>knitr::kable(head(get_books(&quot;analects&quot;)))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">book</th>
<th align="left">chapter</th>
<th align="left">word</th>
<th align="left">chapter_cn</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">analects</td>
<td align="left">xue-er</td>
<td align="left">子曰：「學而時習之，不亦說乎？有朋自遠方來，不亦樂乎？人不知而不慍，不亦君子乎？」</td>
<td align="left">學而</td>
</tr>
<tr class="even">
<td align="left">analects</td>
<td align="left">xue-er</td>
<td align="left">有子曰：「其為人也孝弟，而好犯上者，鮮矣；不好犯上，而好作亂者，未之有也。君子務本，本立而道生。孝弟也者，其為仁之本與！」</td>
<td align="left">學而</td>
</tr>
<tr class="odd">
<td align="left">analects</td>
<td align="left">xue-er</td>
<td align="left">子曰：「巧言令色，鮮矣仁！」</td>
<td align="left">學而</td>
</tr>
<tr class="even">
<td align="left">analects</td>
<td align="left">xue-er</td>
<td align="left">曾子曰：「吾日三省吾身：為人謀而不忠乎？與朋友交而不信乎？傳不習乎？」</td>
<td align="left">學而</td>
</tr>
<tr class="odd">
<td align="left">analects</td>
<td align="left">xue-er</td>
<td align="left">子曰：「道千乘之國：敬事而信，節用而愛人，使民以時。」</td>
<td align="left">學而</td>
</tr>
<tr class="even">
<td align="left">analects</td>
<td align="left">xue-er</td>
<td align="left">子曰：「弟子入則孝，出則弟，謹而信，汎愛眾，而親仁。行有餘力，則以學文。」</td>
<td align="left">學而</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Just be careful, the API limit is around 60-ish. Which means you can get about 3 books on average before my download functions start spitting out NA values.</p>
<p>The API indexes its book and chapter names differently. Some are in English (e.g., “analects”) whereas others are written in Pinyin (e.g., “mengzi”). Some chapter titles use the word “the” whereas others don’t. So eventually I’ll consider the need to make the function calls more robust and help users avoid those inconsistencies. There’s a lot that can be improved here, be it adding authentication, a way to keep track of API call count, or anything else - but I’m looking forward to it!</p>
<p>So, what’s my ultimate goal? It is to use <code>ctextclassics</code> for text analysis on Chinese classic texts - Similar to how we see the <strong>amazing Tidytext</strong> and gutenbergr packages used! <strong>Quite ambitious, I know.</strong> At any rate, I’m enjoying reading this classical Chinese.</p>
<p>To cap off this post, you can use my package by typing <code>devtools::install_github(&quot;Jjohn987/ctextclassics&quot;)</code> and remember to check out the documentation of the functions for a better explanation.</p>
<p>If you want to contribute, please do so! You can comment here, fork my Github, or post an issue.</p>
